-- Remove o banco de dados existente, se existir
DROP DATABASE IF EXISTS copa;

-- Cria o novo banco de dados
CREATE DATABASE copa;

-- Usa o banco de dados criado
USE copa;

-- Cria a tabela de grupos
CREATE TABLE grupos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(255) NOT NULL
);

-- Cria a tabela de times
CREATE TABLE times (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    logo BLOB NOT NULL,
    grupo_id INT NOT NULL,
    pts INT DEFAULT 0,
    vitorias INT DEFAULT 0,
    empates INT DEFAULT 0,
    derrotas INT DEFAULT 0,
    gm INT DEFAULT 0,
    gc INT DEFAULT 0,
    sg INT DEFAULT 0,
    FOREIGN KEY (grupo_id) REFERENCES grupos(id)
);

-- Cria a tabela de jogos
CREATE TABLE jogos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    resultado CHAR(1),  -- 'V' para vitória, 'D' para derrota, 'E' para empate
    data_jogo DATE,
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela de configurações com as fases finais atualizadas
CREATE TABLE configuracoes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    equipes_por_grupo INT NOT NULL,
    numero_grupos INT NOT NULL,
    fase_final ENUM('oitavas', 'quartas', 'semifinais', 'final') NOT NULL
);

-- Cria a tabela para armazenar os times classificados para as oitavas de finais
CREATE TABLE oitavas_de_final (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    grupo_nome VARCHAR(50),
    time_nome VARCHAR(100),
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os times classificados para as quartas de finais
CREATE TABLE quartas_de_final (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    grupo_nome VARCHAR(50),
    time_nome VARCHAR(100),
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os times classificados para as semifinais
CREATE TABLE semifinais (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    grupo_nome VARCHAR(50),
    time_nome VARCHAR(100),
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os times classificados para a final
CREATE TABLE final (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    grupo_nome VARCHAR(50),
    time_nome VARCHAR(100),
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os confrontos da final
CREATE TABLE final_confrontos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    timeA_id INT NOT NULL,
    timeA_nome VARCHAR(100) NOT NULL,
    timeB_id INT NOT NULL,
    timeB_nome VARCHAR(100) NOT NULL,
    fase ENUM('final') NOT NULL,
    gols_marcados_timeA INT DEFAULT NULL,
    gols_marcados_timeB INT DEFAULT NULL,
    gols_contra_timeA INT DEFAULT NULL,
    gols_contra_timeB INT DEFAULT NULL,
    FOREIGN KEY (timeA_id) REFERENCES times(id),
    FOREIGN KEY (timeB_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os confrontos das oitavas de finais
CREATE TABLE oitavas_de_final_confrontos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    timeA_id INT NOT NULL,
    timeA_nome VARCHAR(100) NOT NULL,
    timeB_id INT NOT NULL,
    timeB_nome VARCHAR(100) NOT NULL,
    fase ENUM('oitavas') NOT NULL,
    gols_marcados_timeA INT DEFAULT NULL,
    gols_marcados_timeB INT DEFAULT NULL,
    gols_contra_timeA INT DEFAULT NULL,
    gols_contra_timeB INT DEFAULT NULL,
    FOREIGN KEY (timeA_id) REFERENCES times(id),
    FOREIGN KEY (timeB_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os confrontos das quartas de finais
CREATE TABLE quartas_de_final_confrontos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    timeA_id INT NOT NULL,
    timeA_nome VARCHAR(100) NOT NULL,
    timeB_id INT NOT NULL,
    timeB_nome VARCHAR(100) NOT NULL,
    fase ENUM('quartas') NOT NULL,
    gols_marcados_timeA INT DEFAULT NULL,
    gols_marcados_timeB INT DEFAULT NULL,
    gols_contra_timeA INT DEFAULT NULL,
    gols_contra_timeB INT DEFAULT NULL,
    FOREIGN KEY (timeA_id) REFERENCES times(id),
    FOREIGN KEY (timeB_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os confrontos das semifinais
CREATE TABLE semifinais_confrontos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    timeA_id INT NOT NULL,
    timeA_nome VARCHAR(100) NOT NULL,
    timeB_id INT NOT NULL,
    timeB_nome VARCHAR(100) NOT NULL,
    fase ENUM('semifinais') NOT NULL,
    gols_marcados_timeA INT DEFAULT NULL,
    gols_marcados_timeB INT DEFAULT NULL,
    gols_contra_timeA INT DEFAULT NULL,
    gols_contra_timeB INT DEFAULT NULL,
    FOREIGN KEY (timeA_id) REFERENCES times(id),
    FOREIGN KEY (timeB_id) REFERENCES times(id)
);

CREATE TABLE fase_execucao (
    id INT PRIMARY KEY AUTO_INCREMENT,
    fase VARCHAR(50) NOT NULL,
    executado BOOLEAN NOT NULL DEFAULT FALSE
);

-- Criando Tabela Noticias Eduardo
CREATE TABLE noticias (
    id INT AUTO_INCREMENT PRIMARY KEY,
    titulo VARCHAR(255) NOT NULL,
    descricao TEXT NOT NULL,
    imagem LONGBLOB NOT NULL,
    link VARCHAR(255) NOT NULL,
    data_adicao TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

















ATUAL :::
-- Remove o banco de dados existente, se existir
DROP DATABASE IF EXISTS copa;

-- Cria o novo banco de dados
CREATE DATABASE copa;

-- Usa o banco de dados criado
USE copa;

-- Cria a tabela de grupos
CREATE TABLE grupos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(255) NOT NULL
);

-- Cria a tabela de times
CREATE TABLE times (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    logo BLOB NOT NULL,
    grupo_id INT NOT NULL,
    pts INT DEFAULT 0,
    vitorias INT DEFAULT 0,
    empates INT DEFAULT 0,
    derrotas INT DEFAULT 0,
    gm INT DEFAULT 0,
    gc INT DEFAULT 0,
    sg INT DEFAULT 0,
    FOREIGN KEY (grupo_id) REFERENCES grupos(id)
);

-- Cria a tabela de jogos
CREATE TABLE jogos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    resultado CHAR(1),  -- 'V' para vitória, 'D' para derrota, 'E' para empate
    data_jogo DATE,
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela de configurações com as fases finais atualizadas
CREATE TABLE configuracoes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    equipes_por_grupo INT NOT NULL,
    numero_grupos INT NOT NULL,
    fase_final ENUM('oitavas', 'quartas', 'semifinais', 'final') NOT NULL
);

-- Cria a tabela para armazenar os times classificados para as oitavas de finais
CREATE TABLE oitavas_de_final (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    grupo_nome VARCHAR(50),
    time_nome VARCHAR(100),
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os times classificados para as quartas de finais
CREATE TABLE quartas_de_final (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    grupo_nome VARCHAR(50),
    time_nome VARCHAR(100),
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os times classificados para as semifinais
CREATE TABLE semifinais (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    grupo_nome VARCHAR(50),
    time_nome VARCHAR(100),
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os times classificados para a final
CREATE TABLE final (
    id INT AUTO_INCREMENT PRIMARY KEY,
    time_id INT NOT NULL,
    grupo_nome VARCHAR(50),
    time_nome VARCHAR(100),
    FOREIGN KEY (time_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os confrontos da final
CREATE TABLE final_confrontos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    timeA_id INT NOT NULL,
    timeA_nome VARCHAR(100) NOT NULL,
    timeB_id INT NOT NULL,
    timeB_nome VARCHAR(100) NOT NULL,
    fase ENUM('final') NOT NULL,
    gols_marcados_timeA INT DEFAULT NULL,
    gols_marcados_timeB INT DEFAULT NULL,
    gols_contra_timeA INT DEFAULT NULL,
    gols_contra_timeB INT DEFAULT NULL,
    FOREIGN KEY (timeA_id) REFERENCES times(id),
    FOREIGN KEY (timeB_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os confrontos das oitavas de finais
CREATE TABLE oitavas_de_final_confrontos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    timeA_id INT NOT NULL,
    timeA_nome VARCHAR(100) NOT NULL,
    timeB_id INT NOT NULL,
    timeB_nome VARCHAR(100) NOT NULL,
    fase ENUM('oitavas') NOT NULL,
    gols_marcados_timeA INT DEFAULT NULL,
    gols_marcados_timeB INT DEFAULT NULL,
    gols_contra_timeA INT DEFAULT NULL,
    gols_contra_timeB INT DEFAULT NULL,
    FOREIGN KEY (timeA_id) REFERENCES times(id),
    FOREIGN KEY (timeB_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os confrontos das quartas de finais
CREATE TABLE quartas_de_final_confrontos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    timeA_id INT NOT NULL,
    timeA_nome VARCHAR(100) NOT NULL,
    timeB_id INT NOT NULL,
    timeB_nome VARCHAR(100) NOT NULL,
    fase ENUM('quartas') NOT NULL,
    gols_marcados_timeA INT DEFAULT NULL,
    gols_marcados_timeB INT DEFAULT NULL,
    gols_contra_timeA INT DEFAULT NULL,
    gols_contra_timeB INT DEFAULT NULL,
    FOREIGN KEY (timeA_id) REFERENCES times(id),
    FOREIGN KEY (timeB_id) REFERENCES times(id)
);

-- Cria a tabela para armazenar os confrontos das semifinais
CREATE TABLE semifinais_confrontos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    timeA_id INT NOT NULL,
    timeA_nome VARCHAR(100) NOT NULL,
    timeB_id INT NOT NULL,
    timeB_nome VARCHAR(100) NOT NULL,
    fase ENUM('semifinais') NOT NULL,
    gols_marcados_timeA INT DEFAULT NULL,
    gols_marcados_timeB INT DEFAULT NULL,
    gols_contra_timeA INT DEFAULT NULL,
    gols_contra_timeB INT DEFAULT NULL,
    FOREIGN KEY (timeA_id) REFERENCES times(id),
    FOREIGN KEY (timeB_id) REFERENCES times(id)
);

-- Cria a tabela fase_execucao para rastrear a execução de cada fase
CREATE TABLE fase_execucao (
    id INT PRIMARY KEY AUTO_INCREMENT,
    fase VARCHAR(50) NOT NULL,
    executado BOOLEAN NOT NULL DEFAULT FALSE
);

-- Cria a tabela noticias para armazenar notícias
CREATE TABLE noticias (
    id INT AUTO_INCREMENT PRIMARY KEY,
    titulo VARCHAR(255) NOT NULL,
    descricao TEXT NOT NULL,
    imagem LONGBLOB NOT NULL,
    link VARCHAR(255) NOT NULL,
    data_adicao TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Cria a tabela de jogadores
CREATE TABLE jogadores (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(255) NOT NULL,
    gols INT DEFAULT 0,
    assistencias INT DEFAULT 0,
    cartoes_amarelos INT DEFAULT 0,
    cartoes_vermelhos INT DEFAULT 0,
    imagem LONGBLOB,
    time_id INT NOT NULL,
    FOREIGN KEY (time_id) REFERENCES times(id)
);
-- tabela para armazenar o raking de estatistica jogadores
CREATE TABLE posicoes_jogadores (
    id INT AUTO_INCREMENT PRIMARY KEY,
    jogador_id INT NOT NULL,
    categoria ENUM('gols', 'assistencias', 'cartoes_amarelos', 'cartoes_vermelhos') NOT NULL,
    posicao INT DEFAULT 0,
    FOREIGN KEY (jogador_id) REFERENCES jogadores(id)
);
-- Comandos para visualização das tabelas
SELECT * FROM fase_execucao;
SELECT * FROM oitavas_de_final_confrontos;
SELECT * FROM final;
SELECT * FROM semifinais;
SELECT * FROM oitavas_de_final;
SELECT * FROM final_confrontos;
SELECT * FROM semifinais_confrontos;
SELECT * FROM quartas_de_final_confrontos;
SELECT * FROM quartas_de_final;
SELECT * FROM jogos;
SELECT * FROM times;
SELECT * FROM grupos;
SELECT * FROM configuracoes;



SELECT * 
FROM jogos_finais 
WHERE DATE(data_jogo) = '2024-07-15';
